{"ast":null,"code":"import HistoryItem from '@/components/history/HistoryItem.vue';\nexport default {\n  name: 'HistoryTable',\n  components: {\n    HistoryItem\n  },\n\n  data() {\n    return {\n      historyShow: {}\n    };\n  },\n\n  mounted() {\n    this.downloadHistory(2, 2);\n  },\n\n  methods: {\n    // cookie\n    getCookie(objName) {\n      //获取指定名称的cookie的值\n      const arrStr = document.cookie.split(\"; \");\n\n      for (let i = 0; i < arrStr.length; i++) {\n        const temp = arrStr[i].split(\"=\");\n        if (temp[0] === objName) return temp[1];\n      }\n\n      return null;\n    },\n\n    getToken() {\n      return this.getCookie(\"NBI_token\");\n    },\n\n    getUID() {\n      return this.getCookie(\"NBI_UID\");\n    },\n\n    downloadHistory(currentPage, pageCount) {\n      let getHistoryForm = new FormData(); // 身份识别数据\n\n      getHistoryForm.append(\"uid\", this.getUID());\n      getHistoryForm.append(\"token\", this.getToken());\n      getHistoryForm.append(\"currentPage\", currentPage);\n      getHistoryForm.append(\"pageCount\", pageCount);\n      this.$axios.post(\"/NBI/History/display/\", getHistoryForm, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => {\n        if (response.data === 1) {\n          this.$message({\n            showClose: true,\n            message: '登录状态错误！请重新登录。',\n            type: 'error'\n          });\n        } else {\n          console.log(response.data);\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAmBA;AAEA;EACAA,oBADA;EAEAC;IACAC;EADA,CAFA;;EAKAC;IACA;MACAC;IADA;EAKA,CAXA;;EAYAC;IACA;EACA,CAdA;;EAeAC;IACA;IACAC;MAAA;MACA;;MACA;QACA;QACA;MACA;;MACA;IACA,CATA;;IAUAC;MACA;IACA,CAZA;;IAaAC;MACA;IACA,CAfA;;IAgBAC;MACA,oCADA,CAEA;;MACAC;MACAA;MACAA;MACAA;MACA;QACAC;UAAA;QAAA;MADA,GAEAC,IAFA,CAEAC;QACA;UACA;YACAC,eADA;YAEAC,wBAFA;YAGAC;UAHA;QAKA,CANA,MAOA;UACAC;QACA;MACA,CAbA;IAcA;;EArCA;AAfA","names":["name","components","HistoryItem","data","historyShow","mounted","methods","getCookie","getToken","getUID","downloadHistory","getHistoryForm","headers","then","response","showClose","message","type","console"],"sourceRoot":"src/components/history","sources":["HistoryTable.vue"],"sourcesContent":["<template>\r\n  <div class=\"table-container\">\r\n    <div class=\"table-header\">\r\n      <td>图片</td>\r\n      <td>上传用户</td>\r\n      <td>样本名称</td>\r\n      <td>部位</td>\r\n      <td>症状</td>\r\n      <td>上传时间</td>\r\n      <td>过期时间</td>\r\n      <td>附加信息</td>\r\n    </div>\r\n    <ul>\r\n      <li v-for=\"count in 10\" :key=\"count\"><HistoryItem></HistoryItem></li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HistoryItem from '@/components/history/HistoryItem.vue'\r\n\r\nexport default {\r\n  name: 'HistoryTable',\r\n  components: {\r\n    HistoryItem\r\n  },\r\n  data(){\r\n    return{\r\n      historyShow:{\r\n\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.downloadHistory(2,2);\r\n  },\r\n  methods: {\r\n    // cookie\r\n    getCookie(objName){//获取指定名称的cookie的值\r\n      const arrStr = document.cookie.split(\"; \");\r\n      for(let i = 0; i < arrStr.length; i ++){\r\n        const temp = arrStr[i].split(\"=\");\r\n        if(temp[0] === objName) return temp[1];\r\n      }\r\n      return null;\r\n    },\r\n    getToken(){\r\n      return this.getCookie(\"NBI_token\");\r\n    },\r\n    getUID(){\r\n      return this.getCookie(\"NBI_UID\");\r\n    },\r\n    downloadHistory(currentPage, pageCount){\r\n      let getHistoryForm = new FormData();\r\n      // 身份识别数据\r\n      getHistoryForm.append(\"uid\", this.getUID());\r\n      getHistoryForm.append(\"token\", this.getToken());\r\n      getHistoryForm.append(\"currentPage\", currentPage);\r\n      getHistoryForm.append(\"pageCount\", pageCount);\r\n      this.$axios.post(\"/NBI/History/display/\",getHistoryForm, {\r\n         headers: {'Content-Type': 'multipart/form-data'}\r\n      }).then((response) => {\r\n        if (response.data === 1){\r\n          this.$message({\r\n            showClose: true,\r\n            message: '登录状态错误！请重新登录。',\r\n            type: 'error'\r\n          });\r\n        }\r\n        else {\r\n          console.log(response.data);\r\n        }\r\n      })\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nul {\r\n  margin: 0;\r\n}\r\n\r\nli {\r\n  list-style-type: none;\r\n}\r\n\r\n.table-container {\r\n  width: 1300px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.table-header {\r\n  background: rgb(81, 158, 245);\r\n  border-radius: 5px 5px 0 0;\r\n  margin-top: 5px;\r\n  font-weight: 500;\r\n  font-size: 16px;\r\n  color: #fff;\r\n  padding: 12px 0;\r\n}\r\n\r\ntd {\r\n  text-align: left;\r\n  padding: 8px 53.5px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}