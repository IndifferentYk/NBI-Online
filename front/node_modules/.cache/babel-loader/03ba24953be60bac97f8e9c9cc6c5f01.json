{"ast":null,"code":"export default {\n  name: \"P_UserCenter\",\n\n  data() {\n    return {\n      isLogin: true,\n      uname: \"\",\n      rank: 1\n    };\n  },\n\n  computed: {\n    headerIconSrc() {\n      if (this.rank === 1) {\n        return \"/static/img/normalUser.png\";\n      } else {\n        return \"/static/img/superUser.png\";\n      }\n    },\n\n    headerFont() {\n      if (this.rank === 1) {\n        return \"headerNormalFont\";\n      } else {\n        return \"headerSuperFont\";\n      }\n    }\n\n  },\n\n  mounted() {\n    this.getUserCenterInfo();\n  },\n\n  methods: {\n    getCookie(objName) {\n      //获取指定名称的cookie的值\n      const arrStr = document.cookie.split(\"; \");\n\n      for (let i = 0; i < arrStr.length; i++) {\n        const temp = arrStr[i].split(\"=\");\n        if (temp[0] === objName) return temp[1];\n      }\n\n      return null;\n    },\n\n    getToken() {\n      return this.getCookie(\"NBI_token\");\n    },\n\n    getUID() {\n      return this.getCookie(\"NBI_UID\");\n    },\n\n    getUserCenterInfo() {\n      let getUserInfoForm = new FormData();\n      getUserInfoForm.append(\"token\", this.getToken());\n      getUserInfoForm.append(\"uid\", this.getUID());\n      let config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n      this.$axios.post(\"/NBI/User/getUserInfo/\", getUserInfoForm, config).then(response => {\n        console.log(response);\n\n        if (response.data === 1) {\n          this.isLogin = false;\n          this.$message({\n            message: '没有找到您的用户信息，您可能是没有登录或通信不畅',\n            type: 'error'\n          });\n        } else {\n          this.isLogin = true;\n          this.uname = response.data.name;\n          this.rank = response.data.rank;\n        }\n      });\n    },\n\n    userLogOut() {\n      // 注销\n      let logoutForm = new FormData();\n      logoutForm.append(\"token\", this.getToken());\n      logoutForm.append(\"uid\", this.getUID());\n      this.$axios.post(\"/NBI/User/logout\", logoutForm, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => {\n        console.log(response);\n\n        if (response.data === 1) {\n          this.$message({\n            message: '注销失败，您的账号状态错误！',\n            type: 'error'\n          });\n        } else if (response.data === 2) {\n          this.$message({\n            message: '您已注销',\n            type: 'warning'\n          });\n          this.isLogin = false;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA2BA;EACAA,oBADA;;EAEAC;IACA;MACAC,aADA;MAEAC,SAFA;MAGAC;IAHA;EAKA,CARA;;EASAC;IACAC;MACA;QACA;MACA,CAFA,MAGA;QACA;MACA;IACA,CARA;;IASAC;MACA;QACA;MACA,CAFA,MAGA;QACA;MACA;IACA;;EAhBA,CATA;;EA2BAC;IACA;EACA,CA7BA;;EA8BAC;IACAC;MAAA;MACA;;MACA;QACA;QACA;MACA;;MACA;IACA,CARA;;IASAC;MACA;IACA,CAXA;;IAYAC;MACA;IACA,CAdA;;IAeAC;MACA;MACAC;MACAA;MACA;QACAC;UAAA;QAAA;MADA;MAGA;QACAC;;QACA;UACA;UACA;YACAC,mCADA;YAEAC;UAFA;QAIA,CANA,MAMA;UACA;UACA;UACA;QACA;MACA,CAbA;IAcA,CApCA;;IAqCAC;MACA;MACA;MACAC;MACAA;MACA;QACAL;UAAA;QAAA;MADA,GAEAM,IAFA,CAEAC;QACAN;;QACA;UACA;YACAC,yBADA;YAEAC;UAFA;QAIA,CALA,MAMA;UACA;YACAD,eADA;YAEAC;UAFA;UAIA;QACA;MACA,CAjBA;IAkBA;;EA5DA;AA9BA","names":["name","data","isLogin","uname","rank","computed","headerIconSrc","headerFont","mounted","methods","getCookie","getToken","getUID","getUserCenterInfo","getUserInfoForm","headers","console","message","type","userLogOut","logoutForm","then","response"],"sourceRoot":"src/components/userCenterPage","sources":["UserCenter.vue"],"sourcesContent":["<template>\n  <div id=\"userCenterPageContainer\">\n    <div v-show=\"isLogin\" id=\"userCenterInner\">\n      <div id=\"userCenterHeader\">\n        <div style=\"width: 15%;height: 70%;display: flex;justify-content: center;align-items: center;\">\n          <img :src=\"headerIconSrc\" id=\"userCenterHeader_icon\" alt=\"加载失败\">\n        </div>\n        <div style=\"width: 25%;height: 70%;display: flex;flex-direction: column;justify-content: center;align-items: start\">\n          <div style=\"width: 100%;height: 60%; display: flex;justify-content: start;align-items: center;\">\n            <p id=\"headerNameFont\">{{uname}}</p>\n          </div>\n          <div style=\"width: 100%;height: 35%; display: flex;justify-content: start;align-items: center;\" :class=\"headerFont\">\n            <p>您是：{{rank===1?'普通':'超级'}}用户</p>\n          </div>\n        </div>\n        <div style=\"width: 60%;height: 70%;display: flex;flex-direction: row;justify-content: end; align-items: center\">\n          <div @click=\"userLogOut()\" id=\"logOutBtn\"><p>Log Out</p></div>\n        </div>\n      </div>\n    </div>\n    <div v-show=\"!isLogin\" id=\"noInfoShow\">\n      <img src=\"/static/img/userCenterBG.png\" style=\"width: 28%\">\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"P_UserCenter\",\n  data(){\n    return {\n      isLogin: true,\n      uname: \"\",\n      rank: 1,\n    }\n  },\n  computed:{\n    headerIconSrc(){\n      if (this.rank === 1){\n        return \"/static/img/normalUser.png\";\n      }\n      else{\n        return \"/static/img/superUser.png\";\n      }\n    },\n    headerFont(){\n      if (this.rank === 1){\n        return \"headerNormalFont\";\n      }\n      else{\n        return \"headerSuperFont\";\n      }\n    }\n  },\n  mounted() {\n    this.getUserCenterInfo();\n  },\n  methods:{\n    getCookie(objName){//获取指定名称的cookie的值\n      const arrStr = document.cookie.split(\"; \");\n      for(let i = 0; i < arrStr.length; i ++){\n        const temp = arrStr[i].split(\"=\");\n        if(temp[0] === objName) return temp[1];\n      }\n      return null;\n    },\n    getToken(){\n      return this.getCookie(\"NBI_token\");\n    },\n    getUID(){\n      return this.getCookie(\"NBI_UID\");\n    },\n    getUserCenterInfo(){\n      let getUserInfoForm = new FormData();\n      getUserInfoForm.append(\"token\", this.getToken());\n      getUserInfoForm.append(\"uid\", this.getUID());\n      let config = {\n         headers: {'Content-Type': 'multipart/form-data'}\n      };\n      this.$axios.post(\"/NBI/User/getUserInfo/\",getUserInfoForm, config).then((response)=>{\n        console.log(response)\n        if (response.data===1){\n          this.isLogin = false;\n          this.$message({\n            message: '没有找到您的用户信息，您可能是没有登录或通信不畅',\n            type: 'error'\n          });\n        }else{\n          this.isLogin = true;\n          this.uname = response.data.name;\n          this.rank = response.data.rank;\n        }\n      })\n    },\n    userLogOut(){\n      // 注销\n      let logoutForm = new FormData();\n      logoutForm.append(\"token\", this.getToken());\n      logoutForm.append(\"uid\", this.getUID());\n      this.$axios.post(\"/NBI/User/logout\",logoutForm, {\n         headers: {'Content-Type': 'multipart/form-data'}\n      }).then((response)=>{\n        console.log(response)\n        if (response.data === 1){\n          this.$message({\n            message: '注销失败，您的账号状态错误！',\n            type: 'error'\n          });\n        }\n        else if (response.data === 2){\n          this.$message({\n            message: '您已注销',\n            type: 'warning',\n          });\n          this.isLogin = false;\n        }\n      })\n    },\n  },\n}\n</script>\n\n<style scoped>\n#userCenterPageContainer{\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n#userCenterInner{\n  width: 75%;\n  height: 90%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n#noInfoShow{\n  width: 75%;\n  height: 90%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n#userCenterHeader{\n  height: 20%;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  border-bottom: 1px solid #07004f;\n}\n#userCenterHeader_icon{\n  height: 80%;\n  border-radius: 5px;\n  border: 1px #07004f solid;\n}\n.headerSuperFont{\n  color: goldenrod;\n  font-family: 幼圆,serif;\n}\n.headerNormalFont{\n  color: gray;\n  font-family: 幼圆,serif;\n}\n#headerNameFont{\n  color: #07004f;\n  font-family: \"Droid Sans Mono\", \"DejaVu Sans Mono\", monospace;\n  font-weight: bolder;\n  font-size: x-large;\n  cursor: pointer;\n  transition: 0.3s ease;\n}\n#headerNameFont:hover{\n  color: #0b007e;\n}\n#logOutBtn{\n  width: 28%;\n  height: 40%;\n  border: 1px solid red;\n  color: #0b007e;\n  font-family: \"Droid Sans Mono\", \"DejaVu Sans Mono\", monospace;\n  margin-right: 5%;\n  transition: 0.3s ease;\n  border-radius: 5px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: small;\n}\n#logOutBtn:hover{\n  cursor: pointer;\n  background-color: red;\n  color: white;\n}\n</style>"]},"metadata":{},"sourceType":"module"}